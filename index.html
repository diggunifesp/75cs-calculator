<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Interactive flow: FRIED + CFS → Dementia → Deardorff/Lee → Shared decision → Result" name="description"/>
<title>75+ Cancer Screener (75+CS)</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.1/cdn.min.js"></script>
<style>[x-cloak]{display:none!important} @media print{button, .no-print{display:none!important}}</style>
<meta content="Calculator — 75+ Cancer Screener (75+CS)" property="og:title"/><meta content="Interactive flow: FRIED + CFS → Dementia → Deardorff/Lee → Shared decision → Result" property="og:description"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Calculator — 75+ Cancer Screener (75+CS)" name="twitter:title"/><meta content="Interactive flow: FRIED + CFS → Dementia → Deardorff/Lee → Shared decision → Result" name="twitter:description"/><style id="print-style">
@media print {
  /* Remove shadows and background colors for economy */
  * { box-shadow: none !important; text-shadow: none !important; }
  img { max-width: 100% !important; }
  .no-print { display: none !important; }
  .print-only { display: block !important; }
  body { background: #fff !important; color: #000 !important; }
  a:link::after { content: " (" attr(href) ")"; font-size: 10px; }
}
</style></head>
<body class="bg-gray-50 min-h-screen text-gray-800" x-data="fluxograma()"><a class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 bg-white border rounded px-3 py-2" href="#main">Skip to content</a><main id="main">
<div class="max-w-6xl mx-auto px-4 py-6">
<header class="mb-6">
<h1 class="text-2xl font-bold text-center uppercase">
    75+ Cancer Screener (75+CS)
  </h1>
<div class="mt-2 text-center text-gray-700 text-sm md:text-base font-medium">SCREENING FOR BREAST, COLORECTAL AND PROSTATE CANCER IN 75+ YEARS OLD PATIENTS (MAY BE APPLIED FOR 65+)</div>
<div class="mt-1 text-center text-gray-600 text-xs md:text-sm leading-relaxed">
<div>
<div class="mt-1">
<strong>Medicine Department, Discipline of Geriatrics and Gerontology</strong>
    </div>
<div class="mt-1">
<strong>Paulista School of Medicine (EPM); Federal University of São Paulo (UNIFESP)</strong>
    </div>
<div class="mt-1">
<strong>Authors:</strong> Marianne Wolff Rezende Teixeira, MD (UNIFESP); Matheus de Oliveira Barros, MD (UNIFESP); Gisele Wally Braga Colleoni, MD, PhD (UNIFESP)
    </div>
<div class="mt-1">
<strong>Contributors:</strong> Maísa Braga Aguiar, MD (UNIFESP); Lia Alexandre Botelho de Paula, MD (UNIFESP); Luciano Pereira Soares, PhD (Insper); Adriana Bruscato Bortoluzzo, PhD (Insper); Ana Beatriz Galhardi Di Tommaso, MD, MSc (UNIFESP); Eduardo Canteiro Cruz, MD (UNIFESP); Maysa Seabra Cendoroglo, MD, PhD (UNIFESP)
    </div>
</div>
</header>
<section class="mt-4" id="fluxograma-hero">
<div class="bg-white rounded-xl shadow-2xl ring-1 ring-black/5">
<img alt="Fluxograma de rastreio" class="w-full h-auto block cursor-zoom-in" id="fluxograma-img" src="assets/img/flowchart-en.png"/>
</div>
</section><div class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center hidden z-50" id="fluxograma-modal"><img alt="Fluxograma ampliado" class="max-h-screen max-w-screen cursor-zoom-out" id="fluxograma-modal-img" src="assets/img/flowchart-en.png"/></div>
<div class="mb-4">
<div class="flex items-center justify-between mb-1">
<p class="text-sm">Step <span x-text="step"></span> of 5</p>
<div class="text-xs flex gap-2 items-center no-print mt-2">
<span class="bg-gray-200 rounded-full px-3 py-0.5" x-show="cfs">CFS: <span x-text="cfs"></span></span>
<span class="bg-gray-200 rounded-full px-3 py-0.5" x-show="friedCount &gt; 0">FRIED: <span x-text="friedCount + '/5 — ' + frailtyClass"></span></span>
<span class="bg-gray-200 rounded-full px-3 py-0.5" x-show="hasDementia === true || hasDementia === false">Dementia: <span x-text="hasDementia ? 'Yes' : 'No'"></span></span>
<span class="bg-gray-200 rounded-full px-3 py-0.5" x-show="(step &gt;= 3) &amp;&amp; (hasDementia === true || hasDementia === false) &amp;&amp; (risk10Value != null)">10-year mortality risk: <span x-text="(hasDementia===false && ((typeof calcLeePoints==='function'?calcLeePoints(): (lee&&lee.points))||0) <= 1 ? 'Lee ' + String.fromCharCode(60) + ' 5%' : risk10Label)"></span></span>
<span class="bg-gray-200 rounded-full px-3 py-0.5" x-show="consent === true || consent === false">Consent: <span x-text="consent ? 'Yes' : 'No'"></span></span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div :style="`width: ${(step/5)*100}%`" class="bg-blue-600 h-2 rounded-full transition-all"></div>
</div>
<template x-if="step === 1">
<div class="bg-white shadow rounded-lg p-4">
<h2 class="text-lg font-semibold mb-2">Step 1 — Frailty</h2>
<p class="text-sm text-gray-500 mb-4">Fill the Clinical Frailty Scale (CFS) or Fried Criteria. Only one method is needed to proceed.</p>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label class="text-sm font-medium mb-2 block">FRIED — Fried Criteria*</label>
<div class="space-y-2 text-sm">
<label class="flex items-center gap-2"><input type="checkbox" x-model="fried.weightLoss"/> Unintentional weight loss ≥5% body weight in the last year</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="fried.exhaustion"/> Self-reported exhaustion/fatigue</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="fried.lowActivity"/> Low physical activity</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="fried.slowness"/> Slow gait speed (&lt; 0.8 m/s)</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="fried.weakness"/> Handgrip strength</label>
</div>
<div class="mt-2 text-xs text-gray-700">
    Selected: <span class="font-semibold" x-text="friedCount"></span>/5 — <span class="font-semibold" x-text="frailtyClass"></span>
</div>
<div class="mt-3 p-3 bg-gray-50 border rounded text-xs leading-relaxed">
<strong>Handgrip Strength — Cut-off points</strong><br/>
<span class="inline-block mt-1">Women: <span class="font-semibold">&lt; 16 kgf</span></span><br/>
<span class="inline-block">Men: <span class="font-semibold">&lt; 27 kgf</span></span>
<div class="text-[10px] text-gray-500 mt-1">*Handgrip strength was adapted from original Fried criteria and does not correlate with BMI.</div>
<div class="text-[10px] text-gray-500 mt-1">Reference: Writing Group for the European Working Group on Sarcopenia in Older People 2 (EWGSOP2), and the Extended Group for EWGSOP2. Sarcopenia: revised European consensus on definition and diagnosis. Age Ageing. 2019;48(1):16-31. doi: 10.1093/ageing/afy169. Erratum in: Age Ageing. 2019;48(4):601. doi: 10.1093/ageing/afz046. PMID: 30312372; PMCID: PMC6322506.</div>
</div>
</div>
<div>
<label class="text-sm font-medium mb-2 block">CFS — Clinical Frailty Scale</label>
<select class="border rounded w-full px-3 py-2" x-model.number="cfs">
<option value="">Choose…</option>
<template :key="n" x-for="n in 9">
<option :value="n" x-text="n"></option>
</template>
</select>
<div class="mt-3 p-3 bg-gray-50 border rounded text-xs leading-relaxed cursor-default" id="cfsLegendBox">
<p class="text-xs mt-2 mb-3"><button type="button" id="openCfsLink" class="underline text-blue-700" onclick="return (window.__openCfs ? window.__openCfs() : false)">Click here for Clinical Frailty Scale</button></p>

<strong>CFS:</strong><br/>
          1 — Very Fit: robust, high energy.<br/>
          2 — Well: no active disease, ocasionally active.<br/>
          3 — Managing Well: medical problems are well controlled, regularly active.<br/>
          4 — Vulnerable: not dependent, symptoms limit activities.<br/>
          5 — Mildly Frail: more evident slowing, needs hel with IADL.<br/>
          6 — Moderately Frail: needs help with all outside activities.<br/>
          7 — Severely Frail: completely dependente for personal care.<br/>
          8 — Very Severely Frail: approaching end of life.<br/>
          9 — Terminally Ill: life expectancy &lt; 6 months
        </div>
</div>
</div>
<div class="grid grid-cols-2 gap-3 mt-4">
<button @click="routeFromFragility()" class="bg-blue-600 text-white rounded py-2">Continue</button>
<button @click="resetFrag()" class="bg-gray-200 rounded py-2">Clear</button>
</div>
</div>
</template>
<!-- Step 2: Demência? -->
<template x-if="step === 2">
<div class="bg-white shadow rounded-lg p-4">
<h2 class="text-lg font-semibold mb-2">Step 2 — Does the patient have a dementia diagnosis?</h2>
<div class="grid grid-cols-2 gap-3">
<button @click="hasDementia = true; step = 3" class="bg-purple-600 text-white rounded py-2">Yes</button>
<button @click="hasDementia = false; step = 3" class="bg-green-600 text-white rounded py-2">No</button>
</div>
<div class="mt-3"><button @click="step = 1" class="text-sm underline">Back</button></div>
</div>
</template>
<!-- Step 3: Calculadoras (Deardorff ou Lee, conforme demência) -->
<template x-if="step === 3">
<div class="bg-white shadow rounded-lg p-4">
<template x-if="hasDementia === true">
<div>
<h2 class="text-lg font-semibold mb-2">Step 3 — Deardorff Index (dementia)</h2>
<!-- Deardorff form -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-2">
<div><label class="text-xs block mb-1">Age</label>
<select class="border rounded w-full px-3 py-2" x-model="dem.age">
<option>65-69</option><option>70-74</option><option>75-79</option>
<option>80-84</option><option>85-89</option><option>90+</option>
</select></div>
<div><label class="text-xs block mb-1">Sex</label>
<select class="border rounded w-full px-3 py-2" x-model="dem.sex">
<option value="M">Male</option><option value="F">Female</option>
</select></div>
<div><label class="text-xs block mb-1">Weight (Kg)</label><input @input="updateDemBMI()" class="border rounded w-full px-3 py-2" step="0.1" type="number" x-model.number="dem.wkg"/></div>
<div><label class="text-xs block mb-1">Height (cm)</label><input @input="updateDemBMI()" class="border rounded w-full px-3 py-2" step="0.1" type="number" x-model.number="dem.hcm"/></div>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2">
<div><label class="text-xs block mb-1">BMI</label><div class="px-3 py-2 border rounded bg-gray-50 w-full" x-text="dem.bmi ? dem.bmi.toFixed(1) : '—'"></div></div><div><label class="text-xs block mb-1">Smoking</label>
<select class="border rounded w-full px-3 py-2" x-model="dem.smoke"><option>Never</option><option>Former smoker</option><option>Current</option></select></div>
<div><label class="text-xs block mb-1">ADL dependencies — includes needing help with dressing, bathing, eating, getting in or out of bed, and toileting (0-5)</label><input class="border rounded w-full px-3 py-2" max="5" min="0" type="number" x-model.number="dem.adl"/></div>
<div><label class="text-xs block mb-1">IADL difficulties — includes difficulty using a telephone, preparing a meal, managing medications, managing money such as paying bills, and shopping for groceries (0-5)</label><input class="border rounded w-full px-3 py-2" max="5" min="0" type="number" x-model.number="dem.iadl"/></div>
<label class="flex items-center gap-2"><input type="checkbox" x-model="dem.walk"/> Difficulty with walking several blocks</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="dem.vigorous"/> Participates in vigorous physical activity (running/jogging, swimming, cycling, aerobics or gym workout, tennis, or digging with a shovel)</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="dem.diabetes"/> Diabetes</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="dem.heart"/> Heart disease</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="dem.cancer"/> Cancer, other than minor skin cancer</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="dem.lung"/> Lung disease, such as chronic obstructive pulmonary disease (COPD) or chronic bronchitis</label>
</div>
<div class="p-3 bg-gray-50 rounded border mt-3">
<p class="text-sm">10-year mortality risk: <span class="font-semibold" x-text="fmtPct(demRisk(10))"></span></p>
<div class="mt-2 flex flex-wrap gap-2">
<button @click="applyDemToFlow()" class="bg-blue-600 text-white rounded px-3 py-2">Apply to flowchart</button>
<button @click="resetStep3()" class="bg-gray-200 rounded px-3 py-2">Clear</button>
</div>
</div>
</div>
</template>
<template x-if="hasDementia === false">
<div>
<h2 class="text-lg font-semibold mb-2">Step 3 — Lee Index (10 years)</h2>
<!-- Lee form -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-2">
<div><label class="text-xs block mb-1">Age</label>
<select class="border rounded w-full px-3 py-2" x-model="lee.age">
<option value="50-59">50–59</option>
<option value="60-64">60–64</option><option value="65-69">65–69</option><option value="70-74">70–74</option>
<option value="75-79">75–79</option><option value="80-84">80–84</option><option value="&gt;=85">≥85</option>
</select></div>
<div><label class="text-xs block mb-1">Sex</label>
<select class="border rounded w-full px-3 py-2" x-model="lee.sex"><option value="M">Male</option><option value="F">Female</option></select></div>
<div class="md:col-span-2 grid grid-cols-2 gap-3">
<div><label class="text-xs block mb-1">Weight (Kg)</label><input @input="updateLeeBMI()" class="border rounded w-full px-3 py-2" step="0.1" type="number" x-model.number="lee.wkg"/></div>
<div><label class="text-xs block mb-1">Height (cm)</label><input @input="updateLeeBMI()" class="border rounded w-full px-3 py-2" step="0.1" type="number" x-model.number="lee.hcm"/></div>
</div>
<div><label class="text-xs block mb-1">BMI</label><div class="px-3 py-2 border rounded bg-gray-50" x-text="lee.bmi ? lee.bmi.toFixed(1) : '—'"></div></div>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-2 mt-2">
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.diabetes"/> Diabetes</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.cancer"/> Cancer (excluding minor skin cancers)</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.cld"/> COPD that limits their usual activities at home</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.chf"/> Congestive heart failure</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.smoker"/> Currently smokes cigarettes</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.bath"/> Difficulty with bathing or showering without help</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.money"/> Difficulty managing finances</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.walk"/> Difficulty walking several blocks</label>
<label class="flex items-center gap-2"><input type="checkbox" x-model="lee.push"/> Difficulty pushing or pulling large objects (e.g. living room chair)</label>
</div>
<div class="p-3 bg-gray-50 rounded border mt-3">
<p class="text-sm">Score Lee: <span class="font-semibold" x-text="calcLeePoints()"></span></p>
<p class="text-sm">10-year mortality risk: <span class="font-semibold" x-text="(calcLeePoints()!=null && calcLeePoints()<=1 ? '\u003C 5%' : fmtPct(leeRisk10(calcLeePoints())))"></span></p>
<div class="mt-2 flex flex-wrap gap-2">
<button @click="applyLeeToFlow()" class="bg-blue-600 text-white rounded px-3 py-2">Apply to flowchart</button>
<button @click="resetStep3()" class="bg-gray-200 rounded px-3 py-2">Clear</button>
</div>
</div>
</div>
</template>
<div class="mt-3"><button @click="step = 2" class="text-sm underline">Back</button></div>
</div>
</template>
<!-- Step 4: Shared decision-making -->
<template x-if="step === 4">
<div class="bg-white shadow rounded-lg p-4">
<h2 class="text-lg font-semibold mb-2">Step 4 — Shared decision-making</h2>
<p class="text-sm text-gray-700 mb-4"><strong>Question:</strong> If the result is positive, does the patient and/or their family agree to proceed with diagnostic evaluation and treatment?</p>
<div class="grid grid-cols-2 gap-3">
<button @click="consent = true; step = 5" class="bg-green-600 text-white rounded py-2">Yes</button>
<button @click="consent = false; step = 5" class="bg-red-600 text-white rounded py-2">No</button>
</div>
<div class="mt-3"><button @click="step = 3" class="text-sm underline">Back</button></div>
</div>
</template>
<!-- Step 5: Resultado -->
<template x-if="step === 5">
<div :class="resultTone.bg" class="bg-white shadow rounded-lg p-4 border-l-4">
<h2 :class="resultTone.text" class="text-xl font-bold" x-text="result.label"></h2>
<p :class="resultTone.text" class="text-sm mt-2" x-text="result.reason"></p>
<p class="text-xs mt-2 text-gray-600" x-show="result.label === 'Screening not recommended'">Interventions (pharmacological and non-pharmacological therapies) can be implemented and change this decision.</p>
<div class="mt-3 p-3 bg-blue-50 border border-blue-200 rounded" x-show="result.label === 'Screening not recommended'">
<p class="text-xs text-blue-800 mb-2 font-medium">Intervention examples:</p>
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 items-start justify-items-center text-center">
<div class="flex flex-col items-center gap-2"><img alt="Healthy Eating" class="h-48 w-auto mx-auto" decoding="async" loading="lazy" src="assets/img/healthy-eating.png"/><p class="text-sm font-medium text-gray-700 mt-2">Healthy Eating</p>
</div>
<div class="flex flex-col items-center gap-2"><img alt="Physical Activity" class="h-48 w-auto mx-auto" decoding="async" loading="lazy" src="assets/img/physical-activity.png"/><p class="text-sm font-medium text-gray-700 mt-2">Physical Activity</p>
</div>
<div class="flex flex-col items-center gap-2"><img alt="Cognitive Stimulation" class="h-48 w-auto mx-auto" decoding="async" loading="lazy" src="assets/img/cognitive-stimulation.png"/><p class="text-sm font-medium text-gray-700 mt-2">Cognitive Stimulation</p>
</div>
</div>
</div>
<hr class="my-3"/>
<div class="text-xs space-y-1">
<p>CFS: <span x-text="cfs || '—'"></span></p>
<p>Dementia: <span x-text="format(hasDementia)"></span></p>
<p x-show="lee.r10 !== null || dem.r10 !== null">10-year mortality risk: <span x-show="lee.r10 !== null">Lee <span class="font-medium" x-text="fmtPct(lee.r10)"></span></span><span x-show="lee.r10 !== null &amp;&amp; dem.r10 !== null"> | </span><span x-show="dem.r10 !== null">Deardorff <span class="font-medium" x-text="fmtPct(dem.r10)"></span></span></p>
<p>Consent: <span x-text="format(consent)"></span></p>
</div>
<div class="mt-4 flex flex-wrap gap-2">
<button @click="step = 1" class="bg-blue-600 text-white rounded px-3 py-2">Start over</button>
<button @click="resetAll" class="bg-gray-200 rounded px-3 py-2">Reset</button>
<button class="bg-green-600 text-white rounded px-3 py-2" onclick="window.print()">Print</button>
</div>
<div class="mt-2 p-2 bg-gray-50 border rounded text-[11px] md:text-xs text-gray-700 leading-relaxed">
<strong>Advice:</strong>
<span class="font-medium">Start over</span> returns to <span class="font-medium">Step 1</span> keeping data already entered;
  <span class="font-medium">Reset</span> clears <span class="font-medium">all data</span> and restarts the calculator.
</div>
</div>
</template>
<footer class="mt-6 text-center text-xs text-gray-400">
      We do not store any data. Prognostic tools support, never replace, clinical judgment. 
<section class="mt-8">
<details class="bg-white rounded-lg shadow p-4">
<summary class="cursor-pointer text-base font-semibold">References</summary>
<div class="mt-3">
<ol class="list-decimal ml-6 space-y-2 text-sm leading-relaxed">
<li>Bach PB. Late-Stage Cancer End Points to Speed Cancer Screening Clinical Trials—Not So Fast. <em>JAMA</em>. 2024;331(22):1894-1895. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.2024.5821">10.1001/jama.2024.5821</a>. PMID: 38583869.</li>
<li>Brotzman LE, Zikmund-Fisher BJ. Perceived Barriers Among Clinicians and Older Adults Aged 65 and Older Regarding Use of Life Expectancy to Inform Cancer Screening: A Narrative Review and Comparison. <em>Med Care Res Rev</em>. 2023;80(4):372-385. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1177/10775587231153269">10.1177/10775587231153269</a>. PMID: 36800914; PMCID: PMC10716687.</li>
<li>Cinar D, Tas D. Cancer in the elderly. <em>North Clin Istanb</em>. 2015;2(1):73-80. doi: <a class="text-blue-700 underline" href="https://doi.org/10.14744/nci.2015.72691">10.14744/nci.2015.72691</a>. PMID: 28058345; PMCID: PMC5175057.</li>
<li>Cruz M, Covinsky K, Widera EW, Stijacic-Cenzer I, Lee SJ. Predicting 10-year mortality for older adults. <em>JAMA</em>. 2013;309(9):874-876. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.2013.1184">10.1001/jama.2013.1184</a>. PMID: 23462780; PMCID: PMC3760279.</li>
<li>Cruz-Jentoft AJ, Bahat G, Bauer J, Boirie Y, Bruyère O, Cederholm T, Cooper C, Landi F, Rolland Y, Sayer AA, Schneider SM, Sieber CC, Topinkova E, Vandewoude M, Visser M, Zamboni M; Writing Group for the European Working Group on Sarcopenia in Older People 2 (EWGSOP2), and the Extended Group for EWGSOP2. Sarcopenia: revised European consensus on definition and diagnosis. <em>Age Ageing</em>. 2019;48(1):16-31. doi: <a href="https://doi.org/10.1093/ageing/afy169" rel="noopener" target="_blank">10.1093/ageing/afy169</a>. Erratum in: <em>Age Ageing</em>. 2019;48(4):601. doi: <a href="https://doi.org/10.1093/ageing/afz046" rel="noopener" target="_blank">10.1093/ageing/afz046</a>. PMID: 30312372; PMCID: PMC6322506.</li><li>Deardorff WJ, Barnes DE, Jeon SY, Boscardin WJ, Langa KM, Covinsky KE, Mitchell SL, Whitlock EL, Smith AK, Lee SJ. Development and External Validation of a Mortality Prediction Model for Community-Dwelling Older Adults With Dementia. <em>JAMA Intern Med</em>. 2022;182(11):1161-1170. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jamainternmed.2022.4326">10.1001/jamainternmed.2022.4326</a>. PMID: 36156062; PMCID: PMC9513707.</li>
<li>Francisco PMSB, et al. Prevalência de diagnóstico e tipos de câncer em idosos: dados da Pesquisa Nacional de Saúde 2013. <em>Rev Bras Geriatr Gerontol</em>. 2020;23(2):e200023. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1590/1981-22562020023.200023">10.1590/1981-22562020023.200023</a>.</li>
<li>INSTITUTO NACIONAL DE CÂNCER (INCA). Estimativa 2023: incidência de câncer no Brasil. 2022. Disponível em: <a class="text-blue-700 underline" href="https://www.inca.gov.br/publicacoes/livros/estimativa-2023-incidencia-de-cancer-no-brasil">inca.gov.br</a>.</li>
<li>INCA. Detecção precoce do câncer. 2021. Disponível em: <a class="text-blue-700 underline" href="https://www.inca.gov.br/sites/ufu.sti.inca.local/files/media/document/deteccao-precoce-do-cancer.pdf">PDF</a>.</li>
<li>Kotwal AA, Walter LC. Cancer Screening in Older Adults: Individualized Decision-Making and Communication Strategies. <em>Med Clin North Am</em>. 2020;104(6):989-1006. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1016/j.mcna.2020.08.002">10.1016/j.mcna.2020.08.002</a>. PMCID: PMC7594102.</li>
<li>Lee SJ, Lindquist K, Segal MR, Covinsky KE. Development and validation of a prognostic index for 4-year mortality in older adults. <em>JAMA</em>. 2006;295(7):801-808. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.295.7.801">10.1001/jama.295.7.801</a>.</li>
<li>Lee SJ, Boscardin WJ, Kirby KA, Covinsky KE. Individualizing life expectancy estimates for older adults using the Gompertz Law of Human Mortality. <em>PLoS One</em>. 2014;9(9):e108540. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1371/journal.pone.0108540">10.1371/journal.pone.0108540</a>.</li>
<li>Lee SJ, Boscardin WJ, Stijacic-Cenzer I, Conell-Price J, O'Brien S, Walter LC. Time lag to benefit after screening for breast and colorectal cancer: meta-analysis. <em>BMJ</em>. 2013;346:e8441. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1136/bmj.e8441">10.1136/bmj.e8441</a>.</li>
<li>Pereira LFF, et al. Lung cancer screening in Brazil: recommendations from Brazilian societies. <em>J Bras Pneumol</em>. 2024;50(1):e20230233. doi: <a class="text-blue-700 underline" href="https://doi.org/10.36416/1806-3756/e20230233">10.36416/1806-3756/e20230233</a>. PMCID: PMC11095927.</li>
<li>Pilleron S, Sarfati D, Janssen-Heijnen M, et al. Global cancer incidence in older adults, 2012 and 2035. <em>Int J Cancer</em>. 2019;144(1):49-58. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1002/ijc.31664">10.1002/ijc.31664</a>.</li>
<li>Qaseem A, Harrod CS, Crandall CJ, Wilt TJ; ACP. Screening for Colorectal Cancer in Asymptomatic Average-Risk Adults: Guidance Statement. <em>Ann Intern Med</em>. 2023;176(8):1092-1100. doi: <a class="text-blue-700 underline" href="https://doi.org/10.7326/M23-0779">10.7326/M23-0779</a>.</li>
<li>Schoenborn NL, Massare J, Park R, et al. Assessment of Clinician Decision-making on Cancer Screening Cessation in Older Adults With Limited Life Expectancy. <em>JAMA Netw Open</em>. 2020;3(6):e206772. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jamanetworkopen.2020.6772">10.1001/jamanetworkopen.2020.6772</a>.</li>
<li>Schoenborn NL, Lee K, Pollack CE, et al. Older Adults' Views and Communication Preferences About Cancer Screening Cessation. <em>JAMA Intern Med</em>. 2017;177(8):1121-1128. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jamainternmed.2017.1778">10.1001/jamainternmed.2017.1778</a>.</li>
<li>Schoenborn NL, Bowman TL 2nd, Cayea D, et al. Primary Care Practitioners' Views on Incorporating Long-term Prognosis. <em>JAMA Intern Med</em>. 2016;176(5):671-678. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jamainternmed.2016.0670">10.1001/jamainternmed.2016.0670</a>.</li>
<li>Schonberg MA, Davis RB, McCarthy EP, Marcantonio ER. External validation of an index to predict up to 9-year mortality. <em>J Am Geriatr Soc</em>. 2011;59(8):1444-1451. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1111/j.1532-5415.2011.03523.x">10.1111/j.1532-5415.2011.03523.x</a>.</li>
<li>Schonberg MA, Davis RB, McCarthy EP, Marcantonio ER. Index to predict 5-year mortality of community-dwelling adults aged 65+. <em>J Gen Intern Med</em>. 2009;24(10):1115-1122. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1007/s11606-009-1073-y">10.1007/s11606-009-1073-y</a>.</li>
<li>Shear MD, et al. Biden Is Diagnosed With an Aggressive Form of Prostate Cancer. <em>New York Times</em>. 18 maio 2025. Disponível em: <a class="text-blue-700 underline" href="https://www.nytimes.com/2025/05/18/us/politics/biden-prostate-cancer.html">nytimes.com</a>.</li>
<li>Smith RA, Andrews KS, Brooks D, et al. Cancer screening in the United States, 2019. <em>CA Cancer J Clin</em>. 2019;69(3):184-210. doi: <a class="text-blue-700 underline" href="https://doi.org/10.3322/caac.21557">10.3322/caac.21557</a>.</li>
<li>SBU; SBOC; SBRT. Posicionamento sobre o rastreamento do câncer de próstata. 2023. Disponível em: <a class="text-blue-700 underline" href="https://portaldaurologia.org.br/files/arquivos/filee4e2d7e8d48f92bae5f8f445d4e71e43.pdf">portaldaurologia.org.br (PDF)</a>.</li>
<li>Soung MC. Screening for cancer: when to stop? <em>Med Clin North Am</em>. 2015;99(2):249-262. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1016/j.mcna.2014.11.002">10.1016/j.mcna.2014.11.002</a>.</li>
<li>Urban LABD, et al. Recomendações para o rastreamento do câncer de mama no Brasil. <em>Radiol Bras</em>. 2023;56(4):207–214. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1590/0100-3984.2023.0064">10.1590/0100-3984.2023.0064</a>.</li>
<li>USPSTF. Screening for Breast Cancer: Recommendation Statement. <em>JAMA</em>. 2024;331(22):1918-1930. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.2024.5534">10.1001/jama.2024.5534</a>.</li>
<li>USPSTF. Screening for Colorectal Cancer: Recommendation Statement. <em>JAMA</em>. 2021;325(10):1965-1977. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.2021.6238">10.1001/jama.2021.6238</a>.</li>
<li>USPSTF. Screening for Lung Cancer: Recommendation Statement. <em>JAMA</em>. 2021;325(10):962-970. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.2021.1117">10.1001/jama.2021.1117</a>.</li>
<li>USPSTF. Screening for Prostate Cancer: Recommendation Statement. <em>JAMA</em>. 2018;319(18):1901-1913. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.2018.3710">10.1001/jama.2018.3710</a>.</li>
<li>Vieira L, et al. Cancer no idoso: reflexões sobre o ônus da idade. <em>Arq Catarinenses Med</em>. 2022;50(3):123–132. doi: <a class="text-blue-700 underline" href="https://doi.org/10.63845/xk6p4574">10.63845/xk6p4574</a>.</li>
<li>Walter LC, Covinsky KE. Cancer screening in elderly patients: a framework for individualized decision making. <em>JAMA</em>. 2001;285(21):2750-2756. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1001/jama.285.21.2750">10.1001/jama.285.21.2750</a>.</li>
<li>Xu J, Liao J, Yan Q, et al. Trends analysis of cancer incidence, mortality, and survival for the elderly in the United States, 1975–2020. <em>Cancer Med</em>. 2024;13(15):e70062. doi: <a class="text-blue-700 underline" href="https://doi.org/10.1002/cam4.70062">10.1002/cam4.70062</a>.</li>
<li>Zhang Y, et al. What Should I Know About Stopping Routine Cancer Screening? <em>JAMA Intern Med</em>. 2023. Disponível em: <a class="text-blue-700 underline" href="https://jamanetwork.com/journals/jamainternmedicine/fullarticle/2802346">jamanetwork.com</a>.</li>
</ol>
</div>
</details>
</section>
</footer>
</div>
<script>
    function fluxograma() {
      return {
        // Resets all Step 3 inputs (both dementia/Deardorff and no-dementia/Lee)
        resetStep3() {
          try {
            // Deardorff/dementia defaults
            if (this.dem) {
              this.dem.age = this.dem.age || '65-69';
              this.dem.sex = 'F';
              this.dem.wkg = null;
              this.dem.hcm = null;
              this.dem.bmi = null;
              this.dem.walk = false; this.dem.vigorous = false; this.dem.r10 = null; this.dem.adl = 0;
              this.dem.iadl = 0;
              this.dem.smoke = 'Nunca';
              this.dem.diabetes = false;
              this.dem.heart = false;
              this.dem.cancer = false;
              this.dem.lung = false;
            }
            // Lee defaults
            if (this.lee) {
              this.lee.age = '50-59';
              this.lee.sex = 'F';
              this.lee.wkg = null;
              this.lee.hcm = null;
              this.lee.bmi = null;
              this.lee.diabetes = false;
              this.lee.cancer = false;
              this.lee.cld = false;
              this.lee.chf = false;
              this.lee.smoker = false;
              this.lee.bath = false;
              this.lee.money = false;
              this.lee.walk = false;
              this.lee.push = false;
              this.lee.points = null;
              this.lee.r10 = null;
            }
            // Also clear any checked controls shown in Step 3 container
            const step3 = document.querySelector('template[x-if=\"step === 3\"]')?.content || document.querySelector('[data-step="3"], #step3');
            const root = step3?.querySelector ? step3 : document;
            const nodes = root.querySelectorAll && root.querySelectorAll('input[type=checkbox],input[type=radio]');
            if (nodes && nodes.forEach) nodes.forEach(i => i.checked = false);
            const selects = root.querySelectorAll && root.querySelectorAll('select');
            if (selects && selects.forEach) selects.forEach(s => s.selectedIndex = 0);
          } catch (e) { console.warn('resetStep3 failed', e); }
        },
        
        step: 1,
        // Fragilidade
        fried: { weightLoss: false, exhaustion: false, lowActivity: false, slowness: false, weakness: false },
        friedLabels: {
          weightLoss: 'Perda de peso não intencional',
          exhaustion: 'Exaustão/fadiga autorreferida',
          lowActivity: 'Baixo nível de atividade física',
          slowness: 'Lentidão na marcha',
          weakness: 'Força de Preensão Palmar'
        },
        cfs: null,
        get friedCount() { return Object.values(this.fried).filter(Boolean).length; },
        get frailtyClass(){const c=this.friedCount;if(c===0)return'Robust';if(c<=2)return'Pre-frail';if(c<=4)return'Frail (3-4 criteria)';return'Frail (5 criteria)';},
        
        get risk10Value(){
          // Não mostrar risco se pulou por fragilidade importante
          if (this.blockByFrailty) return null;
          // Só calcular após decidir demência
          if (!(this.hasDementia === true || this.hasDementia === false)) return null;
          if (this.hasDementia === true) {
            // Deardorff (demência)
            const v = this.demRisk ? this.demRisk(10) : (this.dem && this.dem.r10 != null ? this.dem.r10 : null);
            return (v !== undefined) ? v : null;
          } else {
            // Lee (sem demência)
            const p = this.calcLeePoints ? this.calcLeePoints() : (this.lee && this.lee.points != null ? this.lee.points : null);
            const v = (p != null && this.leeRisk10) ? this.leeRisk10(p) : (this.lee && this.lee.r10 != null ? this.lee.r10 : null);
            return (v !== undefined) ? v : null;
          }
        },
        get risk10Label(){
          const v = this.risk10Value;
          if (v == null) return '—';
          
        
        if (this.hasDementia === false) {   const p = (typeof this.calcLeePoints==='function' ? this.calcLeePoints() : (this.lee && this.lee.points));   if (p != null && p <= 1) return 'Lee ' + String.fromCharCode(60) + ' 5%'; } if (this.hasDementia === false && v < 0.05) return 'Lee ' + String.fromCharCode(60) + ' 5%'; // Show "\u003C 5%" for Lee when points <= 1
        if (this.hasDementia === false) {
          const p = (typeof this.calcLeePoints==='function' ? this.calcLeePoints() : (this.lee && this.lee.points));
          if (p != null && p <= 1) { return 'Lee ' + String.fromCharCode(60) + ' 5%'; }
        }
        // Ensure 0–1 Lee points always display "\u003C 5%"
        if (this.hasDementia === false) {
          const p = (this.calcLeePoints ? this.calcLeePoints() : (this.lee && this.lee.points));
          if (p !== undefined && p !== null && p <= 1) { return 'Lee ' + String.fromCharCode(60) + ' 5%'; }
        }
    if (this.hasDementia === false && v < 0.05) { return 'Lee ' + String.fromCharCode(60) + ' 5%'; }
        return (this.hasDementia === true ? 'Deardorff ' : 'Lee ') + this.fmtPct(v);
        },
        get showRiskChip(){
          // Mostrar risco apenas se for a etapa correspondente (>=3), demência já decidida e sem bloqueio por fragilidade
          return !this.blockByFrailty && (this.step >= 3) && (this.hasDementia === true || this.hasDementia === false) && (this.risk10Value != null);
        },
        
        
        
        get risk10Chip(){
          const fmt = (v) => this.fmtPct(v);
          if (this.dem && this.dem.r10 !== null && this.dem.r10 !== undefined) return 'Deardorff ' + fmt(this.dem.r10);
          if (this.lee && this.lee.r10 !== null && this.lee.r10 !== undefined) return 'Lee ' + fmt(this.lee.r10);
          return '—';
        },
    
        routeFromFragility(){
          const fc = this.friedCount;
          const cfs = Number(this.cfs);
          if (fc === 5 || (cfs && cfs >= 8)) {
            // Bloqueio por fragilidade importante
            this.blockByFrailty = true;
            this.mortalityHigh = null;
            this.step = 5; // vai direto ao resultado
          } else {
            // Segue para pergunta de demência
            this.blockByFrailty = false;
            this.step = 2;
          }
        },
        resetFrag(){
          this.fried = { weightLoss: false, exhaustion: false, lowActivity: false, slowness: false, weakness: false };
          this.cfs = null;
        },

        // Demência e calculadoras
        hasDementia: null,
        mortalityHigh: null, // true se risco >=50%
        consent: null,

        // Lee (não demência)
        lee: { age:'50-59', sex:'F', wkg:null, hcm:null, bmi:null, diabetes:false, cancer:false, cld:false, chf:false, smoker:false, bath:false, money:false, walk:false, push:false, points:null, r10:null },
        updateLeeBMI(){ if (this.lee.wkg && this.lee.hcm){ const h=this.lee.hcm/100; this.lee.bmi = this.lee.wkg/(h*h);} else { this.lee.bmi=null; } },
        calcLeePoints(){ let p=0; const age={'50-59':0,'60-64':1,'65-69':2,'70-74':3,'75-79':4,'80-84':5,'>=85':7}; p+=age[this.lee.age]||0; if(this.lee.sex==='M')p+=2; if(this.lee.diabetes)p+=1; if(this.lee.cancer)p+=2; if(this.lee.cld)p+=2; if(this.lee.chf)p+=2; if(this.lee.smoker)p+=2; if(this.lee.bmi!==null && this.lee.bmi<25)p+=1; if(this.lee.bath)p+=2; if(this.lee.money)p+=2; if(this.lee.walk)p+=2; if(this.lee.push)p+=1; return p; },
        leeRisk10(points){ const map={0:0.049,1:0.049,2:0.070,3:0.10,4:0.15,5:0.23,6:0.34,7:0.43,8:0.52,9:0.58,10:0.70,11:0.82,12:0.83,13:0.91,14:0.93}; const k=points>=14?14:(points in map?points:14); return map[k]; },
        applyLeeToFlow(){ const p=this.calcLeePoints(); const r=this.leeRisk10(p); this.lee.points=p; this.lee.r10=r; this.mortalityHigh = (r>=0.50); this.step = this.mortalityHigh?5:4; },

        // Deardorff (demência)
        dem: { age:'65-69', sex:'F', wkg:null, hcm:null, bmi:null, walk:false, vigorous:false, adl:0, iadl:0, smoke:'Nunca', diabetes:false, heart:false, cancer:false, lung:false, r1:null, r2:null, r5:null, r10:null },
        updateDemBMI(){ if(this.dem.wkg && this.dem.hcm){ const h=this.dem.hcm/100; this.dem.bmi=this.dem.wkg/(h*h);} else { this.dem.bmi=null; } },
        demLP(){ let lp=0; const age={'65-69':0,'70-74':0.32,'75-79':0.66,'80-84':0.97,'85-89':1.20,'90+':1.47}[this.dem.age]??0; lp+=age; if(this.dem.sex==='F')lp+=(-0.34); const bmi=this.dem.bmi; if(bmi!==null){ if(bmi<18.5)lp+=0.44; else if(bmi>=25 && bmi<30)lp+=(-0.16); else if(bmi>=30)lp+=(-0.28);} lp+=({'Nunca':0,'Former smoker':0.17,'Atual':0.32}[this.dem.smoke]??0); lp+=0.14*(Number(this.dem.adl)||0); lp+=0.10*(Number(this.dem.iadl)||0); if(this.dem.walk)lp+=0.09; if(this.dem.vigorous)lp+=(-0.13); if(this.dem.diabetes)lp+=0.22; if(this.dem.heart)lp+=0.22; if(this.dem.cancer)lp+=0.21; if(this.dem.lung)lp+=0.30; return lp; },
        demRisk(t){ const S0={1:0.9716,2:0.9338,5:0.8001,10:0.5369}[t]; if(!S0)return null; const surv=Math.pow(S0, Math.exp(this.demLP())); return 1-surv; },
        applyDemToFlow(){ const r10=this.demRisk(10); this.dem.r10=r10; this.mortalityHigh = (r10!==null && r10>=0.50); this.step = this.mortalityHigh?5:4; },

        // Flags
        blockByFrailty: false,

        // Resultado & helpers
        get result(){
          // 1) Fragilidade bloqueia
          if (this.blockByFrailty) return { label: 'Screening not recommended', tone: 'danger', reason: 'Very Severely Frail: CSF 8–9.' };
          // 2) Risco alto bloqueia
          if (this.mortalityHigh === true) return { label: 'Screening not recommended', tone: 'danger', reason: 'Risco de mortalidade em 10 anos ≥50%.' };
          // 3) Risco <50% passa por Shared decision-making
          if (this.mortalityHigh === false) {
            if (this.consent === true)  return { label: 'Screening recommended', tone: 'success', reason: 'Shared decision-making: patient/family agree with next steps.' };
            if (this.consent === false) return { label: 'Screening not recommended', tone: 'warning', reason: 'Shared decision-making: patient/family do not agree with next steps.' };
            return { label: 'Shared decision-making', tone: 'info', reason: 'Aguardando resposta de paciente/família.' };
          }
          return { label: 'Resultado', tone: 'info', reason: 'Revise os passos anteriores.' };
        },
        get resultTone(){ return { success:{bg:'border-green-300',text:'text-green-700'}, danger:{bg:'border-red-300',text:'text-red-700'}, warning:{bg:'border-yellow-300',text:'text-yellow-700'}, info:{bg:'border-blue-300',text:'text-blue-700'} }[this.result.tone]; },
        resetAll(){
            this.step = 1;
            // Fragilidade
            this.resetFrag();
            // Demência & riscos
            this.hasDementia = null;
            this.mortalityHigh = null;
            this.consent = null;
            if (this.resetLee) this.resetLee(); else if (this.lee){ this.lee = { age:'65-69', sex:'M', wkg:null, hcm:null, bmi:null, diabetes:false, cancer:false, lung:false, money:false, walk:false, push:false, points:null, r10:null }; }
            if (this.resetDem) this.resetDem(); else if (this.dem){ this.dem = { age:'65-69', sex:'M', wkg:null, hcm:null, bmi:null, diabetes:false, cancer:false, lung:false, money:false, walk:false, push:false, points:null, r10:null }; }
            this.blockByFrailty = false;
        
            // Garantir limpeza completa de caches/calculados
            if (this.lee) { this.lee.points = null; this.lee.r10 = null; }
            if (this.dem) { this.dem.r1 = null; this.dem.r2 = null; this.dem.r5 = null; this.dem.r10 = null; }
        },
        format(v){ if(v===true)return'Yes'; if(v===false)return'No'; return '—'; },
        fmtPct(x){ if (x===null||x===undefined) return '—'; return (x*100).toFixed(0)+'%'; }
      }
    }
  </script>
<div aria-live="polite" class="sr-only" id="live-results"></div></div></main><script id="persist-state">
(function() {
  try {
    // Restore language
    var savedLang = localStorage.getItem('calc_lang');
    var langSelect = document.querySelector('[data-lang-select]') || document.querySelector('select[aria-label*="idioma" i]');
    if (savedLang && langSelect) {
      langSelect.value = savedLang;
      langSelect.dispatchEvent(new Event('change'));
    }
    if (langSelect) {
      langSelect.addEventListener('change', function(e) {
        localStorage.setItem('calc_lang', e.target.value);
      });
    }
    // Restore method
    var savedMethod = localStorage.getItem('calc_method');
    var methodBtns = document.querySelectorAll('[data-method]');
    if (savedMethod) {
      methodBtns.forEach(function(btn) {
        if (btn.getAttribute('data-method') === savedMethod) {
          btn.setAttribute('aria-pressed', 'true');
        } else {
          btn.setAttribute('aria-pressed', 'false');
        }
      });
    }
    methodBtns.forEach(function(btn) {
      btn.addEventListener('click', function() {
        localStorage.setItem('calc_method', btn.getAttribute('data-method'));
        methodBtns.forEach(function(b){
          b.setAttribute('aria-pressed', b===btn ? 'true' : 'false');
        });
      });
    });
  } catch(e) { /* no-op */ }
})();
</script><script id="fluxograma-modal-script">
  const img = document.getElementById("fluxograma-img");
  const modal = document.getElementById("fluxograma-modal");
  const modalImg = document.getElementById("fluxograma-modal-img");

  if (img && modal && modalImg) {
    img.addEventListener("click", () => {
      modal.classList.remove("hidden");
    });
    modal.addEventListener("click", () => {
      modal.classList.add("hidden");
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        modal.classList.add("hidden");
      }
    });
  }
    </script>
<div class="no-print" id="cfsLegendModal" style="display:none; position:fixed; inset:0; z-index:9999; background:rgba(0,0,0,.7);">
<div style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:16px;">
<div style="position:relative; max-width:1000px; width:100%;">
<button id="cfsLegendClose" style="position:absolute; right:-8px; top:-8px; background:#fff; border-radius:999px; padding:6px 12px; font-weight:700; box-shadow:0 2px 8px rgba(0,0,0,.2);">Close</button>
<img alt="Clinical Frailty Scale — reference card" id="cfsLegendImg" src="assets/img/cfs.png" style="width:100%; height:auto; border-radius:8px; border:2px solid #fff; box-shadow:0 6px 24px rgba(0,0,0,.4);"/>
<div style="margin-top:6px; text-align:center; color:#fff; font-size:12px;">Clinical Frailty Scale — reference card</div>
</div>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function(){
  var box = document.getElementById('cfsLegendBox');
  var modal = document.getElementById('cfsLegendModal');
  var closeBtn = document.getElementById('cfsLegendClose');
  var img = document.getElementById('cfsLegendImg');
  if (box && modal){
    /* box title removed */
/* legend click handler disabled */
}
  if (modal){
    modal.addEventListener('click', function(e){
      if (e.target === modal) modal.style.display = 'none';
    });
  }
  if (closeBtn){
    closeBtn.addEventListener('click', function(e){
      e.stopPropagation();
      modal.style.display = 'none';
    });
  }
  if (img){
    img.addEventListener('click', function(e){ e.stopPropagation(); });
  }
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape' && modal && modal.style.display === 'block') {
      modal.style.display = 'none';
    }
  });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  var link  = document.getElementById('openCfsLink');
  var modal = document.getElementById('cfsLegendModal') || document.getElementById('cfsModal') || document.querySelector('[data-modal="cfs"]');
  var closeBtn = document.getElementById('cfsLegendClose') || document.querySelector('[data-close="cfs"]');
  var img = document.getElementById('cfsLegendImg') || document.querySelector('img[data-img="cfs"]');

  if (link && modal){
    link.addEventListener('click', function(ev){
      ev.preventDefault();
      ev.stopPropagation();
      // Support both inline style and Tailwind-based hidden class
      if (modal.style) modal.style.display = 'block';
      if (modal.classList && modal.classList.contains('hidden')) modal.classList.remove('hidden');
    });
  }

  if (modal){
    modal.addEventListener('click', function(e){
      if (e.target === modal){
        if (modal.style) modal.style.display = 'none';
        if (modal.classList && !modal.classList.contains('hidden')) modal.classList.add('hidden');
      }
    });
  }
  if (closeBtn){
    closeBtn.addEventListener('click', function(e){
      e.stopPropagation();
      if (modal.style) modal.style.display = 'none';
      if (modal.classList && !modal.classList.contains('hidden')) modal.classList.add('hidden');
    });
  }
  if (img){
    img.addEventListener('click', function(e){ e.stopPropagation(); });
  }
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape' && modal){
      if (modal.style) modal.style.display = 'none';
      if (modal.classList && !modal.classList.contains('hidden')) modal.classList.add('hidden');
    }
  });
});
</script>


<script>
(function(){
  if (window.__CFS_HELPERS_INSTALLED__) return;
  window.__CFS_HELPERS_INSTALLED__ = true;
  window.__openCfs = function(){
    try {
      var modal = document.getElementById('cfsLegendModal') ||
                  document.getElementById('cfsModal') ||
                  document.querySelector('[data-modal="cfs"]');
      if (!modal) return false;
      if (modal.style) modal.style.display = 'block';
      if (modal.classList && modal.classList.contains('hidden')) modal.classList.remove('hidden');
      return false; // prevent default
    } catch(e){ return false; }
  };
  window.__closeCfs = function(){
    try {
      var modal = document.getElementById('cfsLegendModal') ||
                  document.getElementById('cfsModal') ||
                  document.querySelector('[data-modal="cfs"]');
      if (!modal) return false;
      if (modal.style) modal.style.display = 'none';
      if (modal.classList && !modal.classList.contains('hidden')) modal.classList.add('hidden');
      return false;
    } catch(e){ return false; }
  };
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape') { try { window.__closeCfs(); } catch(_){} }
  });
})();
</script>

</body>
</html>






